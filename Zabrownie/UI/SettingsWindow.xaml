<Window x:Class="Zabrownie.UI.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ConfiguraciÃ³n"
        Height="700"
        Width="550"
        WindowStartupLocation="CenterOwner"
        Background="#1A1A1D"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="NoResize">

    <Window.Resources>
        <SolidColorBrush x:Key="BgPrimary"
                         Color="#1A1A1D"/>
        <SolidColorBrush x:Key="BgSecondary"
                         Color="#25252A"/>
        <SolidColorBrush x:Key="BgTertiary"
                         Color="#2D2D35"/>
        <SolidColorBrush x:Key="AccentColor"
                         Color="#8B5CF6"/>
        <SolidColorBrush x:Key="TextPrimary"
                         Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextSecondary"
                         Color="#A0A0A8"/>
        <SolidColorBrush x:Key="BorderColor"
                         Color="#3A3A45"/>

        <!-- Opera GX style ScrollBar -->
        <Style x:Key="OperaGXScrollBar"
               TargetType="ScrollBar">
            <Setter Property="Width"
                    Value="10"/>
            <Setter Property="Background"
                    Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid x:Name="Root"
                              Background="Transparent">
                            <Track x:Name="PART_Track"
                                   IsDirectionReversed="True">
                                <!-- Invisible buttons (disable arrows) -->
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.LineUpCommand"
                                                  Opacity="0"/>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.LineDownCommand"
                                                  Opacity="0"/>
                                </Track.IncreaseRepeatButton>

                                <!-- The oval thumb -->
                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="Thumb">
                                                <Border x:Name="ThumbBorder"
                                                        Width="6"
                                                        Margin="2"
                                                        Background="{StaticResource AccentColor}"
                                                        CornerRadius="10"
                                                        Opacity="0.7"/>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver"
                                                             Value="True">
                                                        <Setter TargetName="ThumbBorder"
                                                                Property="Opacity"
                                                                Value="0.9"/>
                                                    </Trigger>
                                                    <Trigger Property="IsDragging"
                                                             Value="True">
                                                        <Setter TargetName="ThumbBorder"
                                                                Property="Opacity"
                                                                Value="1"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Apply Opera GX scrollbar to all ScrollViewers -->
        <Style TargetType="ScrollViewer">
            <Setter Property="VerticalScrollBarVisibility"
                    Value="Auto"/>
            <Setter Property="HorizontalScrollBarVisibility"
                    Value="Disabled"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollViewer">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <ScrollContentPresenter Grid.Column="0"/>

                            <ScrollBar Grid.Column="1"
                                       Orientation="Vertical"
                                       Value="{TemplateBinding VerticalOffset}"
                                       Maximum="{TemplateBinding ScrollableHeight}"
                                       ViewportSize="{TemplateBinding ViewportHeight}"
                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                       Style="{StaticResource OperaGXScrollBar}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="GroupBox">
            <Setter Property="Foreground"
                    Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush"
                    Value="{StaticResource BorderColor}"/>
            <Setter Property="BorderThickness"
                    Value="1"/>
            <Setter Property="Margin"
                    Value="0,0,0,16"/>
            <Setter Property="Padding"
                    Value="12"/>
        </Style>

        <Style TargetType="CheckBox">
            <Setter Property="Foreground"
                    Value="{StaticResource TextPrimary}"/>
            <Setter Property="Margin"
                    Value="0,0,0,8"/>
        </Style>

        <Style TargetType="TextBlock">
            <Setter Property="Foreground"
                    Value="{StaticResource TextPrimary}"/>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Background"
                    Value="{StaticResource BgTertiary}"/>
            <Setter Property="Foreground"
                    Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush"
                    Value="{StaticResource BorderColor}"/>
            <Setter Property="Padding"
                    Value="8,4"/>
            <Setter Property="CaretBrush"
                    Value="{StaticResource AccentColor}"/>
        </Style>

        <Style TargetType="ComboBox">
            <Setter Property="Background"
                    Value="{StaticResource BgTertiary}"/>
            <Setter Property="Foreground"
                    Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush"
                    Value="{StaticResource BorderColor}"/>
        </Style>

        <Style TargetType="ListBox">
            <Setter Property="Background"
                    Value="{StaticResource BgTertiary}"/>
            <Setter Property="Foreground"
                    Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush"
                    Value="{StaticResource BorderColor}"/>
        </Style>

        <Style x:Key="AccentButton"
               TargetType="Button">
            <Setter Property="Background"
                    Value="{StaticResource AccentColor}"/>
            <Setter Property="Foreground"
                    Value="White"/>
            <Setter Property="BorderThickness"
                    Value="0"/>
            <Setter Property="Padding"
                    Value="16,8"/>
            <Setter Property="Cursor"
                    Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver"
                         Value="True">
                    <Setter Property="Opacity"
                            Value="0.9"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Row="0"
                      VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Color de acento -->
                <GroupBox Header="ðŸŽ¨ Color de Acento">
                    <StackPanel>
                        <TextBlock Text="Colores predefinidos:"
                                   Margin="0,0,0,8"/>
                        <UniformGrid Columns="4"
                                     HorizontalAlignment="Left">
                            <Button Content="â—"
                                    FontSize="32"
                                    Width="60"
                                    Height="60"
                                    Foreground="#8B5CF6"
                                    Background="Transparent"
                                    BorderThickness="1"
                                    BorderBrush="{StaticResource BorderColor}"
                                    Click="PresetColor_Click"
                                    Tag="#8B5CF6"
                                    Margin="0,0,4,0"
                                    ToolTip="Morado"/>
                            <Button Content="â—"
                                    FontSize="32"
                                    Width="60"
                                    Height="60"
                                    Foreground="#FF006B"
                                    Background="Transparent"
                                    BorderThickness="1"
                                    BorderBrush="{StaticResource BorderColor}"
                                    Click="PresetColor_Click"
                                    Tag="#FF006B"
                                    Margin="0,0,4,0"
                                    ToolTip="Rosa"/>
                            <Button Content="â—"
                                    FontSize="32"
                                    Width="60"
                                    Height="60"
                                    Foreground="#00D9FF"
                                    Background="Transparent"
                                    BorderThickness="1"
                                    BorderBrush="{StaticResource BorderColor}"
                                    Click="PresetColor_Click"
                                    Tag="#00D9FF"
                                    Margin="0,0,4,0"
                                    ToolTip="Cyan"/>
                            <Button Content="â—"
                                    FontSize="32"
                                    Width="60"
                                    Height="60"
                                    Foreground="#00FF88"
                                    Background="Transparent"
                                    BorderThickness="1"
                                    BorderBrush="{StaticResource BorderColor}"
                                    Click="PresetColor_Click"
                                    Tag="#00FF88"
                                    ToolTip="Verde"/>
                        </UniformGrid>

                        <TextBlock Text="Color personalizado (Hex):"
                                   Margin="0,16,0,8"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="CustomColorTextBox"
                                     Grid.Column="0"
                                     Text="#8B5CF6"
                                     Margin="0,0,8,0"/>
                            <Button Grid.Column="1"
                                    Content="Aplicar"
                                    Margin="2,2,1,1"
                                    Padding="2,2,1,1"
                                    Style="{StaticResource AccentButton}"
                                    Click="ApplyCustomColor_Click"/>
                        </Grid>
                    </StackPanel>
                </GroupBox>

                <!-- Privacidad -->
                <GroupBox Header="ðŸ”’ Privacidad">
                    <StackPanel>
                        <CheckBox x:Name="EnableAdBlockingCheckBox"
                                  Content="Bloquear anuncios"/>
                        <CheckBox x:Name="StripTrackingParamsCheckBox"
                                  Content="Eliminar parÃ¡metros de rastreo"/>
                        <CheckBox x:Name="BlockThirdPartyCookiesCheckBox"
                                  Content="Bloquear cookies de terceros"/>
                        <CheckBox x:Name="ClearDataOnCloseCheckBox"
                                  Content="Limpiar datos al cerrar"/>
                    </StackPanel>
                </GroupBox>

                <!-- JavaScript -->
                <GroupBox Header="âš¡ JavaScript">
                    <CheckBox x:Name="EnableJavaScriptCheckBox"
                              Content="Habilitar JavaScript (Global)"/>
                </GroupBox>

                <!-- PÃ¡gina de inicio -->
                <GroupBox Header="ðŸ  PÃ¡gina de Inicio">
                    <TextBox x:Name="HomepageTextBox"
                             Padding="8,4"/>
                </GroupBox>

                <!-- User Agent -->
                <GroupBox Header="ðŸŒ User Agent (Opcional)">
                    <TextBox x:Name="UserAgentTextBox"
                             Padding="8,4"
                             TextWrapping="Wrap"
                             Height="60"/>
                </GroupBox>

                <!-- Dominios en lista blanca -->
                <GroupBox Header="âœ“ Dominios en Lista Blanca">
                    <StackPanel>
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="WhitelistDomainTextBox"
                                     Grid.Column="0"
                                     Padding="8,4"
                                     Margin="0,0,8,0"/>
                            <Button x:Name="AddWhitelistButton"
                                    Grid.Column="1"
                                    Content="Agregar"
                                    Style="{StaticResource AccentButton}"
                                    Click="AddWhitelistButton_Click"/>
                        </Grid>

                        <ListBox x:Name="WhitelistListBox"
                                 Height="120"
                                 Margin="0,0,0,8"/>
                        <Button x:Name="RemoveWhitelistButton"
                                Content="Eliminar Seleccionado"
                                Width="150"
                                HorizontalAlignment="Left"
                                Click="RemoveWhitelistButton_Click"
                                Style="{StaticResource AccentButton}"/>
                    </StackPanel>
                </GroupBox>

                <!-- EstadÃ­sticas de filtros -->
                <GroupBox Header="ðŸ“Š EstadÃ­sticas">
                    <StackPanel>
                        <TextBlock x:Name="FilterStatsText"
                                   Margin="0,0,0,8"/>
                        <TextBlock x:Name="BlockedCountText"
                                   Foreground="{StaticResource AccentColor}"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Margin="0,0,0,8"/>
                        <Button Content="Limpiar cachÃ© de decisiones"
                                Width="200"
                                HorizontalAlignment="Left"
                                Click="ClearCacheButton_Click"
                                Style="{StaticResource AccentButton}"/>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>

        <!-- Botones de acciÃ³n -->
        <StackPanel Grid.Row="1"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button Content="Guardar"
                    Width="100"
                    Margin="0,0,8,0"
                    Style="{StaticResource AccentButton}"
                    Click="SaveButton_Click"/>
            <Button Content="Cancelar"
                    Width="100"
                    Background="{StaticResource BgTertiary}"
                    Foreground="{StaticResource TextPrimary}"
                    BorderThickness="1"
                    BorderBrush="{StaticResource BorderColor}"
                    Padding="16,8"
                    Click="CancelButton_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            CornerRadius="6">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                          VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Cursor"
                                Value="Hand"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver"
                                     Value="True">
                                <Setter Property="Opacity"
                                        Value="0.8"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </StackPanel>
    </Grid>
</Window>